dist: bionic
os: linux

notifications:
  email: false

language: c

# blocklist
branches:
  except:
    - gh-pages

env:
  jobs:
  - BOARD='afc-bpm'        -VERSION='3.0' -RTM=''
  - BOARD='afc-bpm'        -VERSION='3.1' -RTM=''
  - BOARD='afc-timing'     -VERSION=''    -RTM='rtm-8sfp'

# Install dependencies
addons:
  apt:
    packages:
      - gcc-arm-none-eabi
      - libnewlib-arm-none-eabi
      - cmake
      - doxygen
      - doxygen-doc
      - doxygen-latex
      - doxygen-gui
      - graphviz

#   Build and check this project
script:
  - ./ci_build.sh

  # Generate and deploy documentation
after_success:
  - cd $TRAVIS_BUILD_DIR/docs && doxygen Doxyfile.dox && echo "" > html/.nojekyll && ls -la html
